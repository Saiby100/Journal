#:import get_color_from_hex kivy.utils.get_color_from_hex
#:import TextButton widgets.buttons.TextButton
#:import Theme utils.theme.Theme
#:import CategoryLabel widgets.label.CategoryLabel
#:import CustomScrollView widgets.scrollview.CustomScrollView
#:import Gif widgets.gif.Gif

#Widgets
<TextButton>:
    size_hint_x: .6
    font_name: Theme.get_primary_font()

<MDTextField>:
    mode: "round"
    size_hint: .7, None
    fill_color_normal: 1, 1, 1, 0
    active_line: False
    hint_text_color_normal: 1, 1, 1, .6
    text_color_normal: Theme.get_text_colour()
    text_color_focus: Theme.get_text_colour()
    line_color_focus: Theme.get_focus_colour()
    line_color_normal: Theme.get_text_colour()
    font_size: "18dp"
    font_name_hint_text: Theme.get_primary_font()

<CategoryLabel>:
    font_name: Theme.get_primary_font()

<JournalEntryCard>:
    focus_behavior: True
    md_bg_color: Theme.get_primary_colour()
    focus_color: Theme.get_focus_colour()
    unfocus_color: Theme.get_primary_colour()
    style: "filled"
    size_hint: None, None
    size: 180, 110
    radius: 25

    MDLabel:
        text: root.title
        color: "black"
        bold: True
        size_hint: None, None
        size: root.width, root.height-35
        pos_hint: {"center_y": .5}
        halign: "center"
        font_name: Theme.get_card_title_font()

<ProfileButton>:
    size_hint: None, None
    size: 50, 50
    ripple_scale: .85

<Gif>:
    source: root.source
    size_hint: None, None
    size: 100, 100
    anim_delay: .25
    anim_loop: 0


#Pages
<Login>:

    MDBoxLayout:
        orientation: "vertical"
        canvas.before:
            Rectangle:
                size: self.size[0], self.size[1]
                pos: self.pos
                source: Theme.get_login_bg()

            Color:
                rgba: 1, 0, 0, .8
    
    MDGridLayout:
        cols: 2

        DetailsLayout:
            id: details_layout
            spacing: 40

            MDAnchorLayout:
                id: back_btn_layout
                anchor_x: "left"
                anchor_y: "top"
                padding: 10

            TextButton:
                id: login_btn
                text: "Log In"
                pos_hint: {'center_x': .5, 'top': .8}
                on_release: root.login_pressed()

            TextButton:
                id: signup_btn
                text: "Sign Up"
                pos_hint: {'center_x': .5, 'top': .65}
                on_release: root.signup_pressed()
            
            Gif:
                id: gif_normal
                source: "resources/gifs/boy.gif"
                pos_hint: {"center_x": .5, "top": .35}
            
            Gif:
                id: gif_curious
                source: "resources/gifs/boy_huh.gif"
                size: 90, 90 
                pos_hint: {"center_x": .5, "top": .35}
                opacity: 0.0
        
        MDBoxLayout:
            orientation: "vertical"
            size_hint_x: .865

<Home>:
    MDBoxLayout:
        orientation: "vertical"
        canvas.before:
            Rectangle:
                size: self.size[0], self.size[1]
                pos: self.pos
                source: Theme.get_home_bg()
    
    CustomScrollView:
        scroll_type: ["bars"] 
        scroll_wheel_distance: 70
        effect_cls: "ScrollEffect"

        MDStackLayout:
            id: notes_layout
            size_hint_y: None
            spacing: 15
            padding: [40, 10]
            height: self.minimum_height
        
    AnchorLayout:
        anchor_x: "right"
        anchor_y: "top"
        padding: [30, 15]

        ProfileButton:
            id: profile_btn
            source: "resources/images/profile_icons/image2.png"
            on_release: root.profile_button_pressed()
    
    AnchorLayout:
        anchor_x: "right"
        anchor_y: "bottom"
        padding: 20

        MDIconButton:
            id: add_btn
            icon: "plus"
            theme_icon_color: "Custom"
            icon_color: Theme.get_text_colour()
            md_bg_color: Theme.get_accent_colour()
            on_release: root.add_note()
